
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Experiment Notebook: Validator Revenue and Profit Yields &#8212; CADLabs Ethereum Research Model Documentation</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Experiment Notebook: Network Issuance and Inflation Rate" href="3_network_issuance_and_inflation_rate.html" />
    <link rel="prev" title="Experiment Notebook: Model Validation" href="1_model_validation.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      
      <h1 class="site-logo" id="site-title">CADLabs Ethereum Research Model Documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../docs/landing-page.html">
   Landing Page
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Documentation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://cadlabs.github.io/ethereum-economic-model/model/index.html">
   Model Code Documentation
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Experiment Notebooks
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="0_README.html">
   Experiment Quick-Start Guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="1_model_validation.html">
   Experiment Notebook: Model Validation
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Experiment Notebook: Validator Revenue and Profit Yields
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="3_network_issuance_and_inflation_rate.html">
   Experiment Notebook: Network Issuance and Inflation Rate
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Simulation Profiling
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="simulation_profiling/simulation_timestep_substep_profiling.html">
   Simulation Timestep &amp; Substep Profiling
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/experiments/notebooks/2_validator_revenue_and_profit_yields.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/experiments/notebooks/2_validator_revenue_and_profit_yields.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Experiment Notebook: Validator Revenue and Profit Yields
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#table-of-contents">
   Table of Contents
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#experiment-summary">
   Experiment Summary
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#experiment-assumptions">
   Experiment Assumptions
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#experiment-setup">
   Experiment Setup
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analysis-1-revenue-and-profit-yields-over-time">
   Analysis 1: Revenue and Profit Yields Over Time
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analysis-2-revenue-and-profit-yields-over-eth-staked">
   Analysis 2: Revenue and Profit Yields Over ETH Staked
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analysis-3-revenue-and-profit-yields-over-eth-price">
   Analysis 3: Revenue and Profit Yields Over ETH Price
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analysis-4-profit-yields-over-eth-staked-vs-eth-price">
   Analysis 4: Profit Yields Over ETH Staked vs. ETH Price
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analysis-5-profit-yields-by-validator-environment-over-time">
   Analysis 5: Profit Yields By Validator Environment Over Time
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="experiment-notebook-validator-revenue-and-profit-yields">
<h1>Experiment Notebook: Validator Revenue and Profit Yields<a class="headerlink" href="#experiment-notebook-validator-revenue-and-profit-yields" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="table-of-contents">
<h1>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference external" href="#Experiment-Summary">Experiment Summary</a></p></li>
<li><p><a class="reference external" href="#Experiment-Assumptions">Experiment Assumptions</a></p></li>
<li><p><a class="reference external" href="#Experiment-Setup">Experiment Setup</a></p></li>
<li><p><a class="reference external" href="#Analysis-1:-Revenue-and-Profit-Yields-Over-Time">Analysis 1: Revenue and Profit Yields Over Time</a></p></li>
<li><p><a class="reference external" href="#Analysis-2:-Revenue-and-Profit-Yields-Over-ETH-Staked">Analysis 2: Revenue and Profit Yields Over ETH Staked</a></p></li>
<li><p><a class="reference external" href="#Analysis-3:-Revenue-and-Profit-Yields-Over-ETH-Price">Analysis 3: Revenue and Profit Yields Over ETH Price</a></p></li>
<li><p><a class="reference external" href="#Analysis-4:-Profit-Yields-Over-ETH-Staked-vs.-ETH-Price">Analysis 4: Profit Yields Over ETH Staked vs. ETH Price (Yield Surface)</a></p></li>
<li><p><a class="reference external" href="#Analysis-5:-Profit-Yields-By-Validator-Environment-Over-Time">Analysis 5: Profit Yields By Validator Environment Over Time</a></p></li>
</ul>
</div>
<div class="section" id="experiment-summary">
<h1>Experiment Summary<a class="headerlink" href="#experiment-summary" title="Permalink to this headline">¶</a></h1>
<p>The purpose of this notebook is to explore the returns validators can expect from staking in the Ethereum protocol across different time horizons, adoption scenarios, ETH price scenarios, and validator environments.</p>
</div>
<div class="section" id="experiment-assumptions">
<h1>Experiment Assumptions<a class="headerlink" href="#experiment-assumptions" title="Permalink to this headline">¶</a></h1>
<p>See <span class="xref myst">assumptions document</span> for further details.</p>
</div>
<div class="section" id="experiment-setup">
<h1>Experiment Setup<a class="headerlink" href="#experiment-setup" title="Permalink to this headline">¶</a></h1>
<p>We begin with several experiment-notebook-level preparatory setup operations:</p>
<ul class="simple">
<li><p>Import relevant dependencies</p></li>
<li><p>Import relevant experiment templates</p></li>
<li><p>Create copies of experiments</p></li>
<li><p>Configure and customize experiments</p></li>
</ul>
<p>Analysis-specific setup operations are handled in their respective notebook sections.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">setup</span>

<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">experiments.notebooks.visualizations</span> <span class="k">as</span> <span class="nn">visualizations</span>
<span class="kn">import</span> <span class="nn">model.constants</span> <span class="k">as</span> <span class="nn">constants</span>
<span class="kn">from</span> <span class="nn">experiments.run</span> <span class="kn">import</span> <span class="n">run</span>
<span class="kn">from</span> <span class="nn">experiments.utils</span> <span class="kn">import</span> <span class="n">inspect_module</span>
<span class="kn">from</span> <span class="nn">model.types</span> <span class="kn">import</span> <span class="n">Stage</span>
<span class="kn">from</span> <span class="nn">model.system_parameters</span> <span class="kn">import</span> <span class="n">validator_environments</span>
<span class="kn">from</span> <span class="nn">model.state_variables</span> <span class="kn">import</span> <span class="n">eth_staked</span><span class="p">,</span> <span class="n">eth_supply</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="c">/* Set dark-theme button opacity - see https://github.com/plotly/plotly.py/issues/3120 */</span>
<span class="p">.</span><span class="nc">updatemenu-item-rect</span> <span class="p">{</span>
    <span class="n">fill-opacity</span><span class="p">:</span> <span class="mf">0.3</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Enable/disable logging</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
<span class="n">logger</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import experiment templates</span>
<span class="kn">import</span> <span class="nn">experiments.templates.time_domain_analysis</span> <span class="k">as</span> <span class="nn">time_domain_analysis</span>
<span class="kn">import</span> <span class="nn">experiments.templates.eth_staked_sweep_analysis</span> <span class="k">as</span> <span class="nn">eth_staked_sweep_analysis</span>
<span class="kn">import</span> <span class="nn">experiments.templates.eth_price_sweep_analysis</span> <span class="k">as</span> <span class="nn">eth_price_sweep_analysis</span>
<span class="kn">import</span> <span class="nn">experiments.templates.eth_price_eth_staked_grid_analysis</span> <span class="k">as</span> <span class="nn">eth_price_eth_staked_grid_analysis</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a new copy of the relevant simulation for each analysis</span>
<span class="n">simulation_1</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">time_domain_analysis</span><span class="o">.</span><span class="n">experiment</span><span class="o">.</span><span class="n">simulations</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">simulation_2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">eth_staked_sweep_analysis</span><span class="o">.</span><span class="n">experiment</span><span class="o">.</span><span class="n">simulations</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">simulation_3</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">eth_price_sweep_analysis</span><span class="o">.</span><span class="n">experiment</span><span class="o">.</span><span class="n">simulations</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">simulation_4</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">eth_price_eth_staked_grid_analysis</span><span class="o">.</span><span class="n">experiment</span><span class="o">.</span><span class="n">simulations</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">simulation_5</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">time_domain_analysis</span><span class="o">.</span><span class="n">experiment</span><span class="o">.</span><span class="n">simulations</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="analysis-1-revenue-and-profit-yields-over-time">
<h1>Analysis 1: Revenue and Profit Yields Over Time<a class="headerlink" href="#analysis-1-revenue-and-profit-yields-over-time" title="Permalink to this headline">¶</a></h1>
<p>This analysis allows the exploration of revenue and profit yields over time, and across three linear adoption scenarios (historical adoption has been approximately linear):</p>
<ul class="simple">
<li><p>Normal adoption: assumes an average of 3 new validators per epoch. These rates correspond to the actual historical validator adoption between 15th January 2021 and 15 July 2021 as per <a class="reference external" href="https://beaconscan.com/">Beaconscan</a>.</p></li>
<li><p>Low adoption: assumes an average of 1.5 new validators per epoch, i.e. a 50% lower rate compared to the base scenario</p></li>
<li><p>High adoption: assumes an average of 4.5 new validators per epoch, i.e. a 50% higher rate compared to the base scenario</p></li>
</ul>
<p>Adoption scenarios can be customized by updating the <code class="docutils literal notranslate"><span class="pre">validator_process</span></code> System Parameter if desired.</p>
<p>The first chart (“Validator Adoption Scenarios”) depicts the three adoption scenarios (i.e. implied ETH staked over time) underlying Analysis 1. Please note that the High Adoption Scenario has non-linear dynamics due to the validator-activation queue-rate limiting. To create custom adoption scenarios, add another entry to the <code class="docutils literal notranslate"><span class="pre">validator_process</span></code> System Parameter, with either a static per-epoch validator adoption rate, or generate a time-series using the current timestep to index the data.</p>
<p>The second chart (“Revenue and Profit Yields Over Time – At a Glance”) depicts both revenue and profit yields over time and across the three adoption scenarios (i.e. implied ETH staked over time). The ETH price (relevant for profit yields) is by default set to the mean ETH price over the last 12 months. The higher the adoption, the lower both revenue and profit yields. The higher the ETH price, the higher the profit yields; while validator operational costs are fixed in dollars, returns are in ETH and their equivalent dollar value depends on the current ETH price.</p>
<p>The third chart (“Revenue or Profit Yields Over Time”) depicts revenue yields or profit yields (choose using button selector) over the chosen time frame and across the three adoption scenarios  (i.e. implied ETH staked over time), and ETH price range. In simple terms, this chart depicts how validators can expect the yield dynamics to change over different adoption and price scenarios. The higher the adoption, the lower both revenue and profit yields. The higher the price, the higher the profit yields.</p>
<p>The fourth chart (“Cumulative Revenue or Profit Yields Over Time”) depicts the cumulative revenue yields or profit yields (choose via button selector) over the chosen time frame, and across the three adoption scenarios (i.e. implied ETH staked over time) and ETH price range. In simple terms, this chart depicts the effective yields a validator can expect over the respective time horizons if they start validating today. The higher the adoption, the lower both revenue and profit yields. The higher the price, the higher the profit yields.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simulation_1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s1">&#39;stage&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">Stage</span><span class="o">.</span><span class="n">BEACON_CHAIN</span><span class="p">],</span>
    <span class="s1">&#39;validator_process&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="k">lambda</span> <span class="n">_run</span><span class="p">,</span> <span class="n">_timestep</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>  <span class="c1"># Normal adoption: current average active validators per epoch from Beaconscan</span>
        <span class="k">lambda</span> <span class="n">_run</span><span class="p">,</span> <span class="n">_timestep</span><span class="p">:</span> <span class="mi">3</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">,</span>  <span class="c1"># Low adoption: 50%-lower scenario</span>
        <span class="k">lambda</span> <span class="n">_run</span><span class="p">,</span> <span class="n">_timestep</span><span class="p">:</span> <span class="mi">3</span> <span class="o">*</span> <span class="mf">1.5</span><span class="p">,</span>  <span class="c1"># High adoption: 50%-higher scenario</span>
    <span class="p">],</span>  <span class="c1"># New validators per epoch</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_1</span><span class="p">,</span> <span class="n">_exceptions</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span><span class="n">simulation_1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">visualizations</span><span class="o">.</span><span class="n">plot_number_of_validators_over_time_foreach_subset</span><span class="p">(</span><span class="n">df_1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The charts below depict revenue and profit yields over time and across the three adoption scenarios shown above (i.e. implied ETH staked over time). The higher the adoption, the lower both revenue and profit yields.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">visualizations</span><span class="o">.</span><span class="n">plot_yields_per_subset_subplots</span><span class="p">(</span>
    <span class="n">df_1</span><span class="p">,</span>
    <span class="n">subplot_titles</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Normal Adoption&#39;</span><span class="p">,</span> <span class="s1">&#39;Low Adoption&#39;</span><span class="p">,</span> <span class="s1">&#39;High Adoption&#39;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">visualizations</span><span class="o">.</span><span class="n">plot_yields_per_subset</span><span class="p">(</span><span class="n">df_1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">visualizations</span><span class="o">.</span><span class="n">plot_cumulative_yields_per_subset</span><span class="p">(</span><span class="n">df_1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="analysis-2-revenue-and-profit-yields-over-eth-staked">
<h1>Analysis 2: Revenue and Profit Yields Over ETH Staked<a class="headerlink" href="#analysis-2-revenue-and-profit-yields-over-eth-staked" title="Permalink to this headline">¶</a></h1>
<p>This analysis allows the exploration of revenue and profit yields over a wide range of ETH staked values. Compared to Analysis 1 (which assumed ETH staked ranges as a result of the adoption scenarios), Analysis 2 explicitly shows the yields validators can expect at certain points in the validator-adoption curve. Profit yields are sensitive to ETH price in USD/ETH and plotted at two discrete points – 100 USD/ETH and maximum ETH price over the last 12 months.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_2</span><span class="p">,</span> <span class="n">_exceptions</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span><span class="n">simulation_2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">visualizations</span><span class="o">.</span><span class="n">plot_revenue_profit_yields_over_eth_staked</span><span class="p">(</span><span class="n">df_2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="analysis-3-revenue-and-profit-yields-over-eth-price">
<h1>Analysis 3: Revenue and Profit Yields Over ETH Price<a class="headerlink" href="#analysis-3-revenue-and-profit-yields-over-eth-price" title="Permalink to this headline">¶</a></h1>
<p>This analysis allows the exploration of revenue and profit yields over a large range of ETH price values in USD/ETH. The ETH staked is fixed at the currrent ETH staked value updated from Etherscan. Revenue yields are not sensitive to ETH price, hence the horizontal line. Profit yields drop quickly at very low ETH prices and stabilize at higher ETH prices. Validator operational costs are fixed in USD, whereas revenue is in ETH. This causes a “cliff” in the realized profit (revenue - costs) at low ETH prices.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simulation_3</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s1">&#39;eth_staked_process&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="c1"># Current ETH staked value updated from Etherscan</span>
        <span class="k">lambda</span> <span class="n">_run</span><span class="p">,</span> <span class="n">_timestep</span><span class="p">:</span> <span class="n">eth_staked</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_3</span><span class="p">,</span> <span class="n">_exceptions</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span><span class="n">simulation_3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">visualizations</span><span class="o">.</span><span class="n">plot_revenue_profit_yields_over_eth_price</span><span class="p">(</span><span class="n">df_3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="analysis-4-profit-yields-over-eth-staked-vs-eth-price">
<h1>Analysis 4: Profit Yields Over ETH Staked vs. ETH Price<a class="headerlink" href="#analysis-4-profit-yields-over-eth-staked-vs-eth-price" title="Permalink to this headline">¶</a></h1>
<p>This contour chart was created to enable at-a-glance intuition about the relationship between profit yields, validator adoption, and ETH price (and because we like colorful charts). Profit yields are highest when the ETH price is high and adoption is low.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_4</span><span class="p">,</span> <span class="n">_exceptions</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span><span class="n">simulation_4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">visualizations</span><span class="o">.</span><span class="n">plot_validator_environment_yield_contour</span><span class="p">(</span><span class="n">df_4</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="s2">&quot;../outputs/validator_environment_yield_contour.png&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>This surface chart displays the same data as the charts above and is arguably less readable, but since some folks might appreciate the fanciness of a 3D plot, we decided to keep it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">visualizations</span><span class="o">.</span><span class="n">plot_validator_environment_yield_surface</span><span class="p">(</span><span class="n">df_4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="analysis-5-profit-yields-by-validator-environment-over-time">
<h1>Analysis 5: Profit Yields By Validator Environment Over Time<a class="headerlink" href="#analysis-5-profit-yields-by-validator-environment-over-time" title="Permalink to this headline">¶</a></h1>
<p>This analysis allows the exploration of revenue and profit yields per validator environment over time. The analysis is based on the “Normal Adoption” scenario described in Analysis 1. This analysis of course depends heavily on the cost assumptions per validator environment. We encourage the user to review the <span class="xref myst">assumptions document</span> in this context.</p>
<p>StaaS validator environments – which do not incur validator operational costs directly but instead pay a percentage of their total revenue as a fee to the relevant service provider – do not have variation in their profit yield with a stochastic (random) ETH price. Pool validator environments tend to receive better returns than StaaS environments, because their operational costs are shared among all the validators in the pool.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simulation_5</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;stage&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">Stage</span><span class="o">.</span><span class="n">BEACON_CHAIN</span><span class="p">]})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_5</span><span class="p">,</span> <span class="n">_exceptions</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span><span class="n">simulation_5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">visualizations</span><span class="o">.</span><span class="n">plot_profit_yields_by_environment_over_time</span><span class="p">(</span><span class="n">df_5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python-cadlabs-eth-model",
            path: "./experiments/notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python-cadlabs-eth-model'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="1_model_validation.html" title="previous page">Experiment Notebook: Model Validation</a>
    <a class='right-next' id="next-link" href="3_network_issuance_and_inflation_rate.html" title="next page">Experiment Notebook: Network Issuance and Inflation Rate</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By The Jupyter Book community<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>